<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./../../Style/sign.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Signup</title>
</head>

<body>
    <div class="container">
        <a href="./../../index.html"> <i class="fas fa-xmark xmark"></i></a>
        <h1>Sign <span style="color: rgb(245, 197, 41);">U</span>p</h1>
        <p>Please fill in this form to create an account!</p>

        <form id="registrationForm" action="./login.html">
            <label for="username">Username</label>
            <input type="text" id="username" name="username" placeholder="Enter Your Username" required>
            <!--Error Message-->
            <span class="error" id="usernameError"></span>
            <!--Success Message-->
            <span class="success" id="usernameSuccess"></span>

            <label for="phoneNo">Mobile Number</label>
            <input type="text" id="phoneNo" name="phoneNo" placeholder="Enter Your Phone" required>
            <!--Phone Number Error Message-->
            <span class="error" id="phoneNoError"></span>
            <!--Success Message-->
            <span class="success" id="phoneNoSuccess"></span>

            <label for="email">Email</label>
            <input type="email" id="email" name="email" placeholder="Enter Your Email" required>
            <!--Email Error Message-->
            <span class="error" id="emailError"></span>
            <!--Success Message-->
            <span class="success" id="emailSuccess"></span>

            <label for="password">Password</label>
            <input type="password" id="password" name="password" placeholder="Enter Your Password" required>
            <!--Password Error Message-->
            <span class="error" id="passwordError"></span>
            <!--Success Message-->
            <span class="success" id="passwordSuccess"></span>
            <div class="form-group">
                <label class="form-check-label"><input type="checkbox" required="required"> I accept the <a
                        href="#">Terms
                        of Use</a> &amp; <a href="#">Privacy Policy</a></label>
            </div>
            <button type="submit"><a href="./login.html">Sign
                    Up</a></button>
            <div>
                <p class="already">Already a member? <a href="./login.html">Login</a></p>
            </div>

        </form>
    </div>

    <script>
        document.getElementById("registrationForm").addEventListener("submit", function (event) {
            var isValid = true;

            var username = document.getElementById("username").value;
            var phoneNo = document.getElementById("phoneNo").value;
            var email = document.getElementById("email").value;
            var password = document.getElementById("password").value;

            var usernameError = document.getElementById("usernameError");
            usernameError.textContent = " ";
            var usernameSuccess = document.getElementById("usernameSuccess");

            var phoneNoError = document.getElementById("phoneNoError");
            phoneNoError.textContent = " ";
            var phoneNoSuccess = document.getAnimations("phoneNoSuccess");

            var emailError = document.getElementById("emailError");
            emailError.textContent = " ";
            var emailSuccess = document.getElementById("emailSuccess");

            var passwordError = document.getElementById("passwordError");
            passwordError.textContent = " ";
            var passwordSuccess = document.getAnimations("passwordSuccess");

            //validation for username
            if (username.trim() === " ") {
                usernameError.textContent = "Enter your correct username";
                isValid = false;
            } else {
                usernameSuccess.textContent = "Correct Username";
            }

            //validation for phone number
            if ((phoneNo.length < 10) || (phoneNo.length > 10)) {
                phoneNoError.textContent = "PhoneNo. must be at least 10 digit number";
                isValid = false;
            } else {
                phoneNoSuccess.textContent = "phone No. verified";
            }

            //validation for Email
            if (!/\S+@\S+\.\S+/.test(email)) {
                emailError.textContent = "Valid email is required";
                isValid = false;
            } else {
                emailSuccess.textContent = "Email verified";
            }

            //validation for Password
            if (password.length < 8) {
                passwordError.textContent = "Password must be at least 8 characters";
                isValid = false;
            } else {
                passwordSuccess.textContent = "Password verified";
            }

            if (!(isValid)) {
                event.preventDefault;
            } else {
                fetch('http://localhost:4000/users', {
                    method: 'POST',
                    body: JSON.stringify({
                        "username": username,
                        "phoneNO": phoneNo,
                        "email": email,
                        "password": password
                    }),
                    headers: {
                        "content-type": "application/json"
                    }
                })
                alert("Sign UP Successfully...")
            }







        })

    </script>
</body>

</html>